@using Schools.Application.Utilities
@using Schools.Application.Utilities.Convertors
@model Tuple<Schools.Domain.Models.Schools.School, string>

<div class="right-side">
    <div class="quick-access layer-style">
        <div class="img-layer">
            <a href="javascript:void(0)" class="change-image">
                <form method="post" id="changeAvatar" asp-controller="Upload" asp-action="ChangeUserAvatar" enctype="multipart/form-data">
                    <input type="file" id="upImgAvatar" name="avatar" class="ProfileAvatarInput">
                </form>
                <i class="zmdi zmdi-edit"></i>
            </a>
            <img src="/images/userAvatars/@Model.Item1.User.UserAvatar">
        </div>
        <div class="detail">
            <h3> آموزشگاه @Model.Item1.SchoolTitle </h3>
            <span> عضویت : @Model.Item1.RegisterDate.ToShamsi() </span>
        </div>
        <ul>
            <li><a href="/SchoolPanel" data-toggle="tooltip" data-placement="top" title="" data-original-title=" داشبورد "><i class="zmdi zmdi-settings"></i></a></li>
            <li><a href="/SchoolPanel/Edit" data-toggle="tooltip" data-placement="top" title="" data-original-title=" ویرایش اطلاعات "><i class="zmdi zmdi-account-o"></i></a></li>
            <li><a href="/SchoolPanel/ChangePassword" data-toggle="tooltip" data-placement="top" title="" data-original-title=" تغییر رمز عبور "><i class="zmdi zmdi-lock-outline"></i></a></li>
            <li><a href="/Logout" data-toggle="tooltip" data-placement="top" title="" data-original-title=" خروج از حساب "><i class="zmdi zmdi-power"></i></a></li>
        </ul>
    </div>
    <section class="sidebar layer-style">
        <header><h3> منوی دسترسی </h3><i class="zmdi zmdi-chevron-down"></i></header>
        <div class="inner">
            <ul>
                <li>
                    <span> حساب کاربری من </span>
                    <ul>
                        <li class="@((Model.Item2=="Edit"?"active":null))"><a href="/SchoolPanel/Edit"> ویرایش حساب کاربری  </a></li>
                        <li class="@((Model.Item2=="ChangePassword"?"active":null))"><a href="/SchoolPanel/ChangePassword"> تغییر رمز عبور  </a></li>
                    </ul>
                </li>
                <li>
                    <span> مدیریت پروفایل </span>
                    <ul>
                        <li><a href="/School/@Model.Item1.SchoolId/@Model.Item1.SchoolTitle.Replace(" ","-").Trim()" target="_blank"> مشاهده پروفایل </a></li>
                        <li class="@((Model.Item2=="Galleries"?"active":null))"><a href="/SchoolPanel/Galleries"> مدیریت گالری تصاویر </a></li>
                        <li class="@((Model.Item2=="Courses"?"active":null))"><a href="/SchoolPanel/Courses"> مدیریت دوره ها </a></li>
                        <li class="@((Model.Item2=="Teachers"?"active":null))"><a href="/SchoolPanel/Teachers"> مدیریت اساتید </a></li>
                        <li ><a target="_blank" href="/School/@Model.Item1.SchoolId/@Model.Item1.SchoolTitle.Replace(" ","-").Trim()#comments"> نظرات کاربران </a></li>
                        <li class="@((Model.Item2=="Messages"?"active":null))"><a href="/SchoolPanel/Messages"> پیام های خصوصی </a> <i>@Model.Item1.User.ReceiverMessages.Count(m => m.MessageContents.Any(c => c.IsSeen == false && c.UserId != User.GetUserId()))</i></li>
                    </ul>
                </li>
                <li class="@((Model.Item2=="Notifications"?"active":null))"><a href="/SchoolPanel/Notifications"> اطلاعیه های سیستم </a> <i>@Model.Item1.User.UserNotifications.Count(n => n.IsSee == false)</i></li>
                <li class="@((Model.Item2=="Tickets"?"active":null))"><a href="/SchoolPanel/Tickets"> تیکت و پشتیبانی </a><i>@Model.Item1.User.UserTickets.Count(t => t.TicketMessages.Any(m => m.IsSeen == false))</i></li>
                <li><a href="/Logout"> خروج از سیستم </a></li>
            </ul>
        </div>
    </section>
</div>
