@using Schools.Application.Utilities
@using Schools.Application.Utilities.Convertors
@model Tuple<Schools.Domain.Models.Users.User, string>

<div class="right-side">
    <!-- avatar -->
    <div class="quick-access layer-style">
        <div class="img-layer">
            <a href="javascript:void(0)" class="change-image">
                <form method="post" id="changeAvatar" asp-controller="Upload" asp-action="ChangeUserAvatar" enctype="multipart/form-data">
                    <input type="file" id="upImgAvatar" name="avatar" class="ProfileAvatarInput">
                </form>
                <i class="zmdi zmdi-edit"></i>
            </a>
            <img src="/images/userAvatars/@Model.Item1.UserAvatar">
        </div>
        <div class="detail">
            <h3>@Model.Item1.Name @Model.Item1.Family </h3>
            <span> عضویت : @Model.Item1.RegisterDate.ToShamsi() </span>
        </div>
        <ul>
            <li><a href="/UserPanel" data-toggle="tooltip" data-placement="top" title="" data-original-title=" داشبورد "><i class="zmdi zmdi-settings"></i></a></li>
            <li><a href="/UserPanel/Edit" data-toggle="tooltip" data-placement="top" title="" data-original-title=" ویرایش اطلاعات "><i class="zmdi zmdi-account-o"></i></a></li>
            <li><a href="/UserPanel/ChangePassword" data-toggle="tooltip" data-placement="top" title="" data-original-title=" تغییر رمز عبور "><i class="zmdi zmdi-lock-outline"></i></a></li>
            <li><a href="/Logout" data-toggle="tooltip" data-placement="top" title="" data-original-title=" خروج از حساب "><i class="zmdi zmdi-power"></i></a></li>
        </ul>
    </div>
    <section class="sidebar layer-style">
        <header><h3> منوی دسترسی </h3><i class="zmdi zmdi-chevron-down"></i></header>
        <div class="inner" style="display: block;">
            <ul>
                <li>
                    <span> حساب کاربری من </span>
                    <ul>
                        <li class="@((Model.Item2=="Edit"?"active":null))"><a href="/UserPanel/Edit"> ویرایش حساب کاربری  </a></li>
                        <li class="@((Model.Item2=="ChangePassword"?"active":null))"><a href="/UserPanel/ChangePassword"> تغییر رمز عبور  </a></li>
                    </ul>
                </li>
                <li class="@((Model.Item2=="UserLikes"?"active":null))"><a href="/UserPanel/UserLikes"> آموزشگاه های پسند شده </a></li>
                <li class="@((Model.Item2=="Rates"?"active":null))"><a href="/UserPanel/Rates"> تاریخچه امتیازدهی شما </a> </li>
                <li class="@((Model.Item2=="Messages"?"active":null))"><a href="/UserPanel/Messages"> پیام های خصوصی </a> <i>@Model.Item1.ReceiverMessages.Count(m => m.MessageContents.Any(c => c.IsSeen == false && c.UserId != User.GetUserId()))</i></li>
                <li class="@((Model.Item2=="Notifications"?"active":null))"><a href="/UserPanel/Notifications"> اطلاعیه های سیستم </a> <i>@Model.Item1.UserNotifications.Count(n => n.IsSee == false)</i></li>
                <li class="@((Model.Item2=="Tickets"?"active":null))"><a href="/UserPanel/Tickets"> تیکت و پشتیبانی </a><i>@Model.Item1.UserTickets.Count(t => t.TicketMessages.Any(m => m.IsSeen == false))</i></li>
                <li><a href=""> خروج از سیستم </a></li>
            </ul>
        </div>
    </section>
</div>