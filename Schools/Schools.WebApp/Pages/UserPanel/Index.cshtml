@page
@using Schools.Application.Utilities.Convertors
@using Schools.Domain.Models.Users
@model Schools.WebApp.Pages.UserPanel.IndexModel
@{
    ViewData["title"] = $"حساب کاربری {Model.UserModel.Name} {Model.UserModel.Family} ";
    bool isSuccess = TempData["EditSuccess"] != null;
}
@section Meta
{
    <link rel="stylesheet" type="text/css" href="/css/account.css">
}
@section Topic_Layer
{
    <div class="container page-title">
        <h1><a href="javascript:void(0)"> حساب کاربری </a></h1>
        <ul itemtype="http://schema.org/BreadcrumbList" class="breadcrumb">
            <li itemtype="http://schema.org/ListItem" itemscope="" itemprop="itemListElement"><a href="/" itemprop="item"><span itemprop="name"> بانک اطلاعاتی آموزشگاه ها </span></a></li>
            <li itemtype="http://schema.org/ListItem" itemscope="" itemprop="itemListElement">
                <a href="" itemprop="item" class="current">
                    <span itemprop="name"> حساب کاربری @Model.UserModel.Name @Model.UserModel.Family </span>
                </a>
            </li>
        </ul>
    </div>
}
<div class="account-layer">
    <div class="container">
        @{
            var menuModel = new Tuple<User, string>(Model.UserModel, "Index");
        }
        <partial name="Shared/_RightMenu" model="menuModel" />

        <div class="left-side">
            <div class="account-heading layer-style">
                <span class="status green"> وضعیت : <i> @(Model.UserModel.IsActive ? "فعال" : "غییر فعال") </i></span>
                <a href=""> <i class="zmdi zmdi-plus"></i> ثبت تیکت </a>
            </div>
            <div class="dashboard-box layer-style last-like">
                <h3> آخرین آموزشگاه های پسند شده </h3>
                <div class="inner">
                    @if (Model.UserModel.UserLikes.Count >= 1)
                    {
                        <ul>
                            @foreach (var item in Model.UserModel.UserLikes)
                            {
                                <li><a href="/School/@item.SchoolId/@item.School.SchoolTitle.Replace(" ", "-").Trim()"> @item.School.SchoolTitle <span> (میزان محبوبیت : @item.School.UserLikes.Count نفر) </span></a></li>
                            }

                        </ul>
                    }
                    else
                    {
                        <div class="alert alert-info">
                            <i class="fa fa-info">موردی برای نمایش وجود ندارد</i>
                        </div>
                    }
                </div>
            </div>
            <div class="dashboard-box layer-style">
                <h3> پیام های خصوصی خوانده نشده </h3>
                <div class="inner">
                    <div class="dashboard-message">
                        @foreach (var item in Model.UserModel.ReceiverMessages)
                        {
                            <div class="ticket-box layer-style">
                                <div class="head">
                                    <span class="code"> کد پیام : <i>@item.Um_Id</i> </span>
                                    <span class="resgiter-date"> تاریخ ارسال : <i>@item.CreateDate.ToShamsi()</i> </span>
                                </div>

                                <div class="text">
                                    <span>
                                        یک پیام از کاربر @item.Sender.UserName برای شما ارسال شده است
                                    </span>
                                    <p>
                                        @if (item.SenderText.Length > 50)
                                        {
                                            <span> @item.SenderText.Substring(0, 50) ...</span>

                                        }
                                        else
                                        {
                                            @item.SenderText

                                        }
                                    </p>
                                    <a href="ticket-content.html"> مشاهده کامل و ثبت پاسخ </a>
                                </div>

                            </div>
                        }

                    </div>
                </div>
            </div>
            <!-- /dashboard -->

        </div>
        <!-- /left side -->
        <div class="clearfix"></div>
    </div>
</div>
@section Scripts
{
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="/js/account.js"></script>
    <script>
        if (@isSuccess.ToString().ToLower())
        {
            swal({
                title: "ویرایش  با موفقیت انجام شد",
                icon: "success",
                button: "باشه"
            });
        }
    </script>
}
