@page
@model Schools.WebApp.Areas.ManagementPanel.Pages.Blogs.IndexModel
@using Schools.Application.Utilities.Convertors
@{
    var menuModel = "blogs";
}
<partial name="_MainMenu" model="menuModel" />

<div class="content-wrapper">
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <a asp-page="Add" class="btn bg-olive margin">افزودن بلاگ</a>
                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">بلاگ ها</h3>

                        <section class="term-categories">
                            <form id="formFilter" method="get">
                                @{
                                    List<int> selected = ViewBag.GetType as List<int>;
                                }
                                <div class="col-md-4 col-sm-6 col-xs-12 pull-right">
                                    <div onchange="cheangType" class="switch-field available">
                                        <input onchange="cheangType" id="available-filter-1" name="getType" value="0" checked="" type="radio">
                                        <label for="available-filter-1"> همه </label>
                                        <input onchange="cheangType" id="available-filter-2" name="getType" value="1" type="radio">
                                        <label for="available-filter-2"> خبر ها </label>
                                        <input onchange="cheangType" id="available-filter-3" name="getType" value="2" type="radio">
                                        <label for="available-filter-3"> مقالات </label>
                                    </div>
                                </div>

                                <div class="box-tools pull-left">
                                    <div class="input-group input-group-sm" style="width: 150px;">
                                        <input type="text" name="Filter" class="form-control pull-right" placeholder="جستجو">

                                        <div class="input-group-btn">
                                            <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </section>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body table-responsive no-padding">
                        <table class="table table-hover">
                            <tr>
                                <th>شماره</th>
                                <th>تصویر</th>
                                <th>نوع</th>
                                <th>عنوان</th>
                                <th>تاریخ</th>
                                <th>توضیح مختصر</th>
                                <th></th>
                            </tr>
                            @foreach (var item in Model.Blogs)
                            {
                                <tr>
                                    <td>@item.BlogId</td>
                                    <td><img src="/images/blogs/@item.ImageName" class="thumbnail" style="max-width:120px" /></td>
                                    <td>@item.BlogType</td>
                                    <td>@item.Title</td>
                                    <td>@item.CreateDate.ToShamsi()</td>
                                    <td>@item.ShortDescription</td>
                                    <td>
                                        <a asp-page="Edit" asp-route-id="@item.BlogId" class="btn-sm btn-info">ویرایش</a>
                                        <a asp-page="Details" asp-route-id="@item.BlogId" class="btn-sm btn-warning">جزئیات</a>
                                        <a asp-page="Comments" asp-route-id="@item.BlogId" class="btn-sm btn-primary">کامنت ها</a>
                                        <a asp-page="Delete" asp-route-id="@item.BlogId" class="btn-sm btn-danger">حذف</a>

                                    </td>
                                </tr>
                            }
                        </table>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
        </div>
    </section>
</div>
@section Scripts{
    <script type="text/javascript">

        function cheangType() {
            $("#formFilter").submit();
        }
    </script>
}